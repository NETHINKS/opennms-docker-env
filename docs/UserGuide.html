<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<meta name="author" content="Michael Batz">
<title>NETHINKS Docker Environment for OpenNMS - Users Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<style>
.listingblock .pygments .hll { background-color: #ffffcc }
.listingblock .pygments  { background: #f8f8f8; }
.listingblock .pygments .tok-c { color: #408080; font-style: italic } /* Comment */
.listingblock .pygments .tok-err { border: 1px solid #FF0000 } /* Error */
.listingblock .pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
.listingblock .pygments .tok-o { color: #666666 } /* Operator */
.listingblock .pygments .tok-ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.listingblock .pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
.listingblock .pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
.listingblock .pygments .tok-cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.listingblock .pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
.listingblock .pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
.listingblock .pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
.listingblock .pygments .tok-ge { font-style: italic } /* Generic.Emph */
.listingblock .pygments .tok-gr { color: #FF0000 } /* Generic.Error */
.listingblock .pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
.listingblock .pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
.listingblock .pygments .tok-go { color: #888888 } /* Generic.Output */
.listingblock .pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.listingblock .pygments .tok-gs { font-weight: bold } /* Generic.Strong */
.listingblock .pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.listingblock .pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
.listingblock .pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.listingblock .pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.listingblock .pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.listingblock .pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
.listingblock .pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.listingblock .pygments .tok-kt { color: #B00040 } /* Keyword.Type */
.listingblock .pygments .tok-m { color: #666666 } /* Literal.Number */
.listingblock .pygments .tok-s { color: #BA2121 } /* Literal.String */
.listingblock .pygments .tok-na { color: #7D9029 } /* Name.Attribute */
.listingblock .pygments .tok-nb { color: #008000 } /* Name.Builtin */
.listingblock .pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
.listingblock .pygments .tok-no { color: #880000 } /* Name.Constant */
.listingblock .pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
.listingblock .pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
.listingblock .pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.listingblock .pygments .tok-nf { color: #0000FF } /* Name.Function */
.listingblock .pygments .tok-nl { color: #A0A000 } /* Name.Label */
.listingblock .pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.listingblock .pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
.listingblock .pygments .tok-nv { color: #19177C } /* Name.Variable */
.listingblock .pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.listingblock .pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
.listingblock .pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
.listingblock .pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
.listingblock .pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
.listingblock .pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
.listingblock .pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
.listingblock .pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
.listingblock .pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
.listingblock .pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.listingblock .pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
.listingblock .pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.listingblock .pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
.listingblock .pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.listingblock .pygments .tok-sx { color: #008000 } /* Literal.String.Other */
.listingblock .pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
.listingblock .pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
.listingblock .pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
.listingblock .pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
.listingblock .pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
.listingblock .pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
.listingblock .pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
.listingblock .pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>NETHINKS Docker Environment for OpenNMS - Users Guide</h1>
<div class="details">
<span id="author" class="author">Michael Batz</span><br>
<span id="email" class="email"><a href="mailto:Michael.Batz@nethinks.com">Michael.Batz@nethinks.com</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_design_of_the_opennms_docker_environment">Design of the OpenNMS Docker Environment</a>
<ul class="sectlevel2">
<li><a href="#_supported_hostsystems">Supported Hostsystems</a></li>
<li><a href="#_limitations_known_issues">Limitations / Known Issues</a></li>
</ul>
</li>
<li><a href="#_setup">Setup</a>
<ul class="sectlevel2">
<li><a href="#_generation_of_a_docker_environment">Generation of a Docker Environment</a></li>
<li><a href="#_setup_of_the_generated_environment">Setup of the generated Environment</a></li>
<li><a href="#_management_of_the_environment">Management of the Environment</a></li>
</ul>
</li>
<li><a href="#_operating">Operating</a>
<ul class="sectlevel2">
<li><a href="#_migration_of_an_existing_opennms_installation">Migration of an existing OpenNMS installation</a></li>
<li><a href="#_configuration_changes">Configuration Changes</a></li>
<li><a href="#_backup">Backup</a></li>
<li><a href="#_restore">Restore</a></li>
<li><a href="#_major_update">Major Update</a></li>
<li><a href="#_minor_update">Minor Update</a></li>
</ul>
</li>
<li><a href="#_import_and_export_of_data">Import and Export of Data</a>
<ul class="sectlevel2">
<li><a href="#_opennms">OpenNMS</a></li>
<li><a href="#_postgresql">PostgreSQL</a></li>
<li><a href="#_nginx">Nginx</a></li>
<li><a href="#_management">Management</a></li>
<li><a href="#_alarmforwarder">AlarmForwarder</a></li>
<li><a href="#_cassandra">Cassandra</a></li>
<li><a href="#_grafana">Grafana</a></li>
<li><a href="#_pris">PRIS</a></li>
<li><a href="#_yourdashboard">yourDashboard</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_design_of_the_opennms_docker_environment">Design of the OpenNMS Docker Environment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is the Docker Environment for the open source network managament plattform OpenNMS. It is designed for testing purposes and smaller production setups and provides the following software:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>OpenNMS</p>
</li>
<li>
<p>PostgreSQL</p>
</li>
<li>
<p>Nginx</p>
</li>
<li>
<p>Alarmforwarder</p>
</li>
<li>
<p>Cassandra</p>
</li>
<li>
<p>Grafana</p>
</li>
<li>
<p>yourDashboard</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The environment is based on Docker Engine and Docker Compose. All related Docker Images are provided on <a href="https://hub.docker.com/r/nethinks/">Docker Hub</a>.</p>
</div>
<div class="paragraph">
<p>The script <em>container_generator.py</em> creates an environment based on a few questions (e.g. which images should be used, which passwords should be set for OpenNMS, &#8230;&#8203;). The result contains a generated <em>docker_compose.yml</em> file and an <em>init</em> directory, which contains some configuration, that will be loaded on the environment&#8217;s first start.</p>
</div>
<div class="paragraph">
<p>The environment&#8217;s base is OpenNMS, PostgreSQL and Nginx. Nginx provides a central SSL reverse proxy for all webservers of the environment (e.g. OpenNMS WebUI, or Grafana WebUI,&#8230;&#8203;). A management container can be accessed via SSH to change configuration files.</p>
</div>
<div class="sect2">
<h3 id="_supported_hostsystems">Supported Hostsystems</h3>
<div class="paragraph">
<p>The Docker Environment (especially the setup of Docker Engine and Docker Compose) was tested with CentOS 7. It should also run on other distributions, maybe some changes on the setup of Docker Engine/Docker Compose are required.</p>
</div>
</div>
<div class="sect2">
<h3 id="_limitations_known_issues">Limitations / Known Issues</h3>
<div class="paragraph">
<p>The following points are known limitations and issues:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Only small/medium sized environments</strong></dt>
<dd>
<p>The Docker Environment has only been tested with running all the containers on one physical host. So, it is designed and tested for small and medium sized OpenNMS environments, where all the software can run on one host. In the future, there may be a cluster support.</p>
</dd>
<dt class="hdlist1"><strong>OpenNMS Horizon only</strong></dt>
<dd>
<p>Currently, only OpenNMS Horizon is supported, but in the future, Meridian support will be available.</p>
</dd>
<dt class="hdlist1"><strong>Cassandra support for testing only</strong></dt>
<dd>
<p>Cassandra support is only for testing purposes at the moment, as there is only one container which handles all the data.</p>
</dd>
<dt class="hdlist1"><strong>IPV6 NAT support</strong></dt>
<dd>
<p>IPv6 support is provided with the ipv6helper container, which provides IPv6 NAT from the particular containers to the outside world. At this time, an incomming IPv6 connection from outside to the containers is not supported.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setup">Setup</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_generation_of_a_docker_environment">Generation of a Docker Environment</h3>
<div class="paragraph">
<p>For the generation of the Docker Environment, the software Docker Engine and Docker Compose should be installed. After that, simply use the <em>env_bootstrap/docker_compose.yml</em> file to start the Generation Environment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span class="tok-nb">cd</span> env_bootstrap
docker-compose up -d</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can then connect to the started container via SSH using the following command and the password <em>secret1234</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">ssh -p <span class="tok-m">2223</span> root@127.0.0.1</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the box, start the script container_generator.py:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span class="tok-nb">cd</span> /opt/opennms-docker-env/scripts/container_generator/
./container_generator.py</code></pre>
</div>
</div>
<div class="paragraph">
<p>The script asks for some parameters for the generation of the environment and creates an <em>output</em> directory which contains the following data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>docker-compose.yml</p>
</li>
<li>
<p>init directory for initializing of the defined containers</p>
</li>
<li>
<p>if defined: download of the docker images</p>
</li>
<li>
<p>if defined: download of the required software (Docker Engine, Docker Compse)</p>
</li>
<li>
<p>if defined: install.sh for Docker Images and Docker Engine/Docker Compose setup</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_setup_of_the_generated_environment">Setup of the generated Environment</h3>
<div class="paragraph">
<p>The generated environment can be installed on any latest Linux distribution. It has been tested under Centos 7. Simply use the files from the <em>output</em> directory. Execute <em>install.sh</em> to install Docker Engine, Docker Compose and the required images:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">./install.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can now start the generated environment with docker-compose:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">docker-compose up -d</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_optional_change_network_of_docker0">optional: Change network of docker0</h4>
<div class="paragraph">
<p>By default, Docker Engine creates a network interface named <em>docker0</em> with an IP address 172.17.0.0/16. If you need to change it, please create the following configuration file /etc/docker/daemon.json:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json"><span class="tok-p">{</span>
  <span class="tok-nt">&quot;bip&quot;</span><span class="tok-p">:</span> <span class="tok-s2">&quot;192.168.0.1/24&quot;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_optional_move_rrds_to_another_partition">optional: Move RRDs to another partition</h4>
<div class="paragraph">
<p>Sometimes, it is required to move the OpenNMS RRD data to another physical disc, to improve the I/O performance. To do so in the Docker Environment, find the mountpoint of the RRDs with <em>docker volume inspect</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">docker volume inspect &lt;opennms volume&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>After that, stop the environment, move the RRD files to the other disk, create a symbolic link and start the environment again. For example, if the mountpoint of the OpenNMS RRD volume is <em>/var/lib/docker/volumes/output_rrd/_data</em>, and the mountpoint of the other physical disk is _/mnt/opennms-rrd, you&#8217;ll can do the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">docker-compose down
mv /var/lib/docker/volumes/output_rrd/ /mnt/opennms-rrd
ln -s /mnt/opennms-rrd /var/lib/docker/volumes/output_rrd/
docker-compose up -d</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_management_of_the_environment">Management of the Environment</h3>
<div class="paragraph">
<p>The Docker Environment can be managed by using the management container. It provides an SSH server which can be acccessed with the following command and the password chosen during the setup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">ssh -p <span class="tok-m">2222</span> root@host</code></pre>
</div>
</div>
<div class="paragraph">
<p>It contains some nice tools (e.g. ping, traceroute, telnet, snmpwalk, &#8230;&#8203;) and access to the data and configuration files of all containers in <em>/data/all-containers</em>. It also contains a docker client to start/stop containers.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_operating">Operating</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following section describes the operational concepts of the Docker Environment.</p>
</div>
<div class="sect2">
<h3 id="_migration_of_an_existing_opennms_installation">Migration of an existing OpenNMS installation</h3>
<div class="paragraph">
<p>To migrate an existing OpenNMS installation into the new Docker Environment, the following steps are required:</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="0"> Back up the existing installation</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> Setup the OpenNMS Docker Environment, but do not start the environment yet</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> Place the (migrated, if necessary) data of the existing installation in the <em>init</em> directory of the Docker Environment</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> Start the environment</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>At first, the data of an existing setup must be secured. For OpenNMS, there are the configuration files, a database dump, RRD files and (if necessary) further files. If a version upgrade should be done with the migration, the secured data must also be migrated for the new version.</p>
</div>
<div class="paragraph">
<p>After that, the OpenNMS Docker Environment must be installed, but should not be started yet. The environment has the directory <em>init</em>, which contains a subdirectory for every container. The data for initializing of the environment must be placed there. Please see the section <a href="#_import_and_export_of_data">Import and Export of Data</a> to see the directory structure for each container. On the environment&#8217;s first start, these data will be imported one-time (they will be copied and can be deleted from the <em>init</em> directory). The environment with the imported data can now be used.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_changes">Configuration Changes</h3>
<div class="paragraph">
<p>Configuration changes for OpenNMS and the other provided software can be done with the management container. You can connect via SSH into the management container and find the data of all other containers in <em>/data/all-containers/&lt;container name&gt;</em>. Simply change the configuration files you like and restart the required container by using the <em>docker</em> commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">docker ps
docker stop &lt;container-name&gt;
docker start &lt;container-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <em>docker ps</em> returns a list with all running docker containers. You can also find the container name in the list. The <em>docker start/stop</em> commands will stop and start the container.</p>
</div>
</div>
<div class="sect2">
<h3 id="_backup">Backup</h3>
<div class="paragraph">
<p>A manual backup of the Environment can be done by executing the following command in the management container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">/opt/managerscripts/command_for_all.sh <span class="tok-nb">export</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When the backup has finished, the exported data are located in <em>/data/export</em> (in management container or on the named volume) and can be copied to an external storage medium.</p>
</div>
<div class="paragraph">
<p>A daily backup to a SMB fileserver or FTP server can also be done automatically using a cronjob. Simply use the environment variables of the management container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span class="tok-nv">CONF_BACKUP_ENABLED</span> <span class="tok-o">=</span> TRUE
<span class="tok-nv">CONF_BACKUP_URL</span> <span class="tok-o">=</span> smb://user:password@server/share/directory

<span class="tok-c1">#or in case of a FTP server:</span>
<span class="tok-nv">CONF_BACKUP_URL</span> <span class="tok-o">=</span> ftp://user:password@server/directory</code></pre>
</div>
</div>
<div class="paragraph">
<p>A daily cronjob will execute the backup at 09:00 p.m. to the configured target.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The container_generator script will also ask you for the parameters above and can create the required configuration.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_restore">Restore</h3>
<div class="paragraph">
<p>A restore of the whole environment on a new hardware requires the following data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>supported operating system</p>
</li>
<li>
<p>generated Docker Environment in the original version (Docker Engine, Docker Compose, Docker Images, docker-compose.yml and the init directory)</p>
</li>
<li>
<p>backup of the environment</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The generated Docker Enviroment consists of the following directoy structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>docker-compose.yml
/init
  /opennms
  /postgres
  /&lt;...&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following steps has to be done for a restore:</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="0"> setup of the operating system</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> setup of the generated Docker Environment (Docker-Engine, Docker Compose, images, configuration)</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> replacement of the <em>init</em> directory of the generated environment with the backup</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> start of the environment</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_major_update">Major Update</h3>
<div class="paragraph">
<p>A major update contains a change of the major version of OpenNMS. The database schema and configuration files needs to be migrated. For a major update, the following steps needs to be done:</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="0"> preparation within a testing environment</p>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="0"> creation of a new version of the Docker Environment</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> data export from the existing environment</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> migration of the exported data in the testing environment</p>
</li>
</ul>
</div>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> update on live system</p>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="0"> creation of a new version of the Docker Environment with the migrated data</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> stop of the old environment</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> start of the new environment</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>First of all, a testing environment with the new version of the Docker Environment will be created. After that, a data export from the existing environment will be done. The following command needs to be executed on the management container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">/opt/managerscripts/command_for_all.sh <span class="tok-nb">export</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the testing environment, the exportet data will now be migrated step by step (e.g. OpenNMS configuration files, but also files from further containers). The intention is, to create the Docker Environment in a new version with the following directory structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>docker-compose.yml
/init
  /opennms        <i class="conum" data-value="1"></i><b>(1)</b>
  /postgres       <i class="conum" data-value="2"></i><b>(2)</b>
  /&lt;...&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>migrated data for container OpenNMS</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>migrated data for container Postgres</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If the migration has been finished and all tests have been passed successfully, the created environment with the migrated data can be installed in the live system. It is very important, that the parent directory for the new Docker environment has an other name as the parent directory for the existing environment. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>/opt
  /onmsenv
    /v1                     <i class="conum" data-value="1"></i><b>(1)</b>
      docker-compose.yml
      /init
        /opennms
        /&lt;...&gt;
    /v2                     <i class="conum" data-value="2"></i><b>(2)</b>
      docker-compose.yml
      /init
        /opennms
        /&lt;...&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>version 1 of the Docker Environment. Will also be used for the name prefix of named volumes.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>version 2 of the Docker Environment. Will also be used for the name prefix of named volumes.</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The name of the parent directory (e.g. <em>v1</em> or <em>v2</em>) will also be used as prefix for the names of named volumes. Because of the diffetent names, you can switch between the environments on any time during the following steps.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The old Docker Environment can now be stopped on the live system with the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span class="tok-nb">cd</span> /opt/onmsenv/v1
docker-compose down</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, the neu version can be started:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span class="tok-nb">cd</span> /opt/onmsenv/v2
docker-compose up -d</code></pre>
</div>
</div>
<div class="paragraph">
<p>If all tests have beed passed successfully and the new environment is stable, the old names volumes can be deleted:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">docker volume rm v1_opennms v1_postgres <span class="tok-o">[</span>...<span class="tok-o">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The update has been done.</p>
</div>
</div>
<div class="sect2">
<h3 id="_minor_update">Minor Update</h3>
<div class="paragraph">
<p>A minor update only contains a change of a minor version of OpenNMS or further add-ons. Existing data does not need to be migrated. Thus, the preparation in a testing environment is not required and the update can be done in a simpler and faster way.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Also a minor update should be prepared carefully und the general process should be tested in a testing environment.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following steps needs to be done for a minor update:</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="0"> creation of a new version of the Docker Environment</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> setup of the environment on the live system</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> data export from the existing environment</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> replacement of the <em>init</em> directory of the generated environment with the export</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> stop of the old environment</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> start of the new environment</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The particular steps correspond to the steps described in section <a href="#_major_update">Major Update</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_import_and_export_of_data">Import and Export of Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The import of data into the OpenNMS Docker Environment will only be done during the initializing on the container&#8217;s first start. All files in the directory <em>data/init</em> of the container will be included. Every container will only import his own data. For example, the OpenNMS container does only import the OpenNMS configuration files, while the OpenNMS database will be imported into the Postgres container. The structure in <em>/data/init</em> depends on the given container and will be described in the next sections of this document. The environment created by container_generator has the following structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>docker-compose.yml
/init
  /opennms        <i class="conum" data-value="1"></i><b>(1)</b>
  /postgres       <i class="conum" data-value="2"></i><b>(2)</b>
  /&lt;...&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Will be mapped in container OpenNMS to /data/init</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>will be mapped in container Postgres to /data/init</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Data export of the Docker Environment will be done by executing the following command in the management container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">/opt/managerscripts/command_for_all.sh <span class="tok-nb">export</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This will execute the script <em>/opt/containerscripts/export.sh</em> in every container of the docker environment. The export.sh script exports the data for the particular container into the <em>/data/export/&lt;container&gt;/</em> directory. In the generated Docker Environment, the directory <em>/data/export/</em> mapped into all container as named volume.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The structure of <em>/data/export</em> matches with the structure of <em>/data/init</em>, which can be used to import data into a new environment. So, exported data can be reimported easily.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following sections describe the import of data for the containers.</p>
</div>
<div class="sect2">
<h3 id="_opennms">OpenNMS</h3>
<div class="paragraph">
<p>The following directories can be used to initialize the OpenNMS container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>docker-compose.yml
/init
  /opennms
    /etc
    /rrd
    /lib_add
    /web_add</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_etc">etc</h4>
<div class="paragraph">
<p>In <em>etc</em>, OpenNMS configuration files can be placed for an import. Please consider the following points, when importing configuration files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>differences between OpenNMS versions</p>
</li>
<li>
<p>in some config files, the full path of the configuration directory is hard coded(e.g.: /var/lib/opennms/rrd vs. /opt/opennms/share/rrd)</p>
</li>
<li>
<p>some configuration files in the Docker environment may not be overwritten, this is</p>
<div class="ulist">
<ul>
<li>
<p>java.conf</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_rrd">rrd</h4>
<div class="paragraph">
<p>The directory <em>rrd</em> contains RRD files to be imported. The following directory structre needs to be met:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>/rrd
  /response
  /snmp</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_lib_add">lib_add</h4>
<div class="paragraph">
<p>Additional JAR files for /opt/opennms/lib can be placed in <em>lib_add</em>. Also, existing files in the OpenNMS Docker image can be overwritten.</p>
</div>
</div>
<div class="sect3">
<h4 id="_web_add">web_add</h4>
<div class="paragraph">
<p>In <em>web_add</em>, additional files for the OpenNMS WebUI (/opt/opennms/jetty_webapps) can be placed. Existing files will be overwritten.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_postgresql">PostgreSQL</h3>
<div class="paragraph">
<p>The container PostgreSQL is the database server for the environment. The import of data can be done with SQL dumps. The following directory structure can be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>docker-compose.yml
/init
  /postgres
    /sql</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_sql">sql</h4>
<div class="paragraph">
<p>Database dumps (e.g. from an OpenNMS or AlarmForwarder system) can be placed in the <em>sql</em> directory. Every dump must be created with specific options (<em>--create</em> and replacement of specific characters) and be named with the file extension <em>*.sql</em>. Please see the following examples for the creation of an OpenNMS and AlarmForwarder dump:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">pg_dump --create -U opennms &gt; db_opennms.sql <span class="tok-o">&amp;&amp;</span> sed -i <span class="tok-s2">&quot;s/LC_COLLATE = &#39;.*&#39; LC_CTYPE = &#39;.*&#39;//g&quot;</span> db_opennms.sql
pg_dump --create -U alarmforwarder &gt; db_alarmforwarder.sql <span class="tok-o">&amp;&amp;</span> sed -i <span class="tok-s2">&quot;s/LC_COLLATE = &#39;.*&#39; LC_CTYPE = &#39;.*&#39;//g&quot;</span> db_alarmforwarder.sql</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The schema of an imported OpenNMS database will be updated automatically to the version used in the Docker image.(the OpenNMS version must not be older than the version where the database dump was created).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_nginx">Nginx</h3>
<div class="paragraph">
<p>For initializing of Nginx, the following directory structure can be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>docker-compose.yml
/init
  /nginx
    /etc
      /ssl</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_etc_ssl">etc/ssl</h4>
<div class="paragraph">
<p>SSL certificate (name <strong>proxy.crt</strong>) and key (name <strong>proxy.key</strong>) can be placed here for an import.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_management">Management</h3>
<div class="paragraph">
<p>For the import of data into the management container, please use the following directory structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>docker-compose.yml
/init
  /management
    /etc</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_etc_2">etc</h4>
<div class="paragraph">
<p>The <em>etc</em> directory can contain a configuration file for the automatic backup of the environment. The configuration file should have the name <em>backup.conf</em>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_alarmforwarder">AlarmForwarder</h3>
<div class="paragraph">
<p>The AlarmForwarder container does not contain own data. All data were hold in the AlarmForwarder database, which will be imported into the Postgres container.</p>
</div>
</div>
<div class="sect2">
<h3 id="_cassandra">Cassandra</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Cassandra support within the Docker Environment is experimental at the moment and for testing purposes only.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Existing data can be imported using the following structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>docker-compose.yml
/init
  /cassandra
    /schema
    /snapshot</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_schema">schema</h4>
<div class="paragraph">
<p>This directory contains the schema definitions for the particular keyspaces of a cassandra database. These could be created with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span class="tok-nv">CQL</span><span class="tok-o">=</span><span class="tok-s2">&quot;DESC KEYSPACE </span><span class="tok-si">${</span><span class="tok-nv">KEYSPACE</span><span class="tok-si">}</span><span class="tok-s2">;&quot;</span>
cqlsh -u <span class="tok-si">${</span><span class="tok-nv">CASSANDRA_USER</span><span class="tok-si">}</span> -p <span class="tok-si">${</span><span class="tok-nv">CASSANDRA_PASSWORD</span><span class="tok-si">}</span> -e <span class="tok-se">\&quot;</span><span class="tok-si">${</span><span class="tok-nv">CQL</span><span class="tok-si">}</span><span class="tok-se">\&quot;</span> <span class="tok-si">${</span><span class="tok-nv">HOSTNAME</span><span class="tok-si">}</span><span class="tok-s2">&quot; &gt; </span><span class="tok-si">${</span><span class="tok-nv">SCHEMAFILE</span><span class="tok-si">}</span><span class="tok-s2"></span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_snapshot">snapshot</h4>
<div class="paragraph">
<p>This directory contains snapshots of cassandra tables. Please see an example script for the creation of snapshots:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">/opt/cassandra/bin/nodetool snapshot -t <span class="tok-nb">export</span>
<span class="tok-nv">SNAPSHOT_PATHS</span><span class="tok-o">=</span><span class="tok-sb">`</span>find /opt/cassandra/data/data/ -name <span class="tok-s2">&quot;export&quot;</span> -type d<span class="tok-sb">`</span>
<span class="tok-k">for</span> SNAPSHOT_PATH in <span class="tok-si">${</span><span class="tok-nv">SNAPSHOT_PATHS</span><span class="tok-si">}</span>
<span class="tok-k">do</span>
    <span class="tok-nv">SNAPSHOT_SUBDIR</span><span class="tok-o">=</span><span class="tok-si">${</span><span class="tok-nv">SNAPSHOT_PATH</span><span class="tok-p">#/opt/cassandra/data/data</span><span class="tok-si">}</span>
    <span class="tok-nv">TARGET_SUBDIR</span><span class="tok-o">=</span><span class="tok-si">${</span><span class="tok-nv">SNAPSHOT_SUBDIR</span><span class="tok-p">%/snapshots/export</span><span class="tok-si">}</span>
    <span class="tok-k">if</span> <span class="tok-o">[[</span> $TARGET_SUBDIR !<span class="tok-o">=</span> /system* <span class="tok-o">]]</span> <span class="tok-p">;</span>
    <span class="tok-k">then</span>
        <span class="tok-nv">TARGET_DIR</span><span class="tok-o">=</span><span class="tok-si">${</span><span class="tok-nv">DUMPDIR</span><span class="tok-si">}</span>/snapshot/<span class="tok-si">${</span><span class="tok-nv">TARGET_SUBDIR</span><span class="tok-si">}</span>
        mkdir -p <span class="tok-si">${</span><span class="tok-nv">TARGET_DIR</span><span class="tok-si">}</span>
        cp <span class="tok-si">${</span><span class="tok-nv">SNAPSHOT_PATH</span><span class="tok-si">}</span>/* <span class="tok-si">${</span><span class="tok-nv">TARGET_DIR</span><span class="tok-si">}</span>
    <span class="tok-k">fi</span>
<span class="tok-k">done</span>
/opt/cassandra/bin/nodetool clearsnapshot -t <span class="tok-nb">export</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_grafana">Grafana</h3>
<div class="paragraph">
<p>The following directories can be used to initialize the Grafana container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>docker-compose.yml
/init
  /grafana
    /conf
    /data</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_conf">conf</h4>
<div class="paragraph">
<p>The directory <em>conf</em> contains the configuration files of Grafana (<em>&lt;Grafana-Home&gt;/conf</em> directory)</p>
</div>
</div>
<div class="sect3">
<h4 id="_data">data</h4>
<div class="paragraph">
<p>The <em>data</em> directory contains an existing data directory of Grafana (<em>&lt;Grafana-Home&gt;/data</em>)</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pris">PRIS</h3>
<div class="paragraph">
<p>For the import of data in PRIS, please use the following directory structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>docker-compose.yml
/init
  /pris
    /requisitions</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_requisitions">requisitions</h4>
<div class="paragraph">
<p>The <em>requisitions</em> directory contains the definitions for Provisioning Requisitions, which are placed in <em>&lt;PRIS-Home&gt;/requisitions</em> in PRIS.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_yourdashboard">yourDashboard</h3>
<div class="paragraph">
<p>Use the following structure for an import of configuration files in yourDashboard</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>docker-compose.yml
/init
  /yourdashboard
    /etc</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_etc_3">etc</h4>
<div class="paragraph">
<p>Configuration files for <em>&lt;yourDashboard-Home&gt;/etc</em> can be placed in <em>etc</em>. Theses files will be imported on the container&#8217;s first start.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-06-21 11:26:24 CEST
</div>
</div>
</body>
</html>